<% 
    // "Time Ago" Logic
    const seconds = Math.floor((new Date() - new Date(blog.createdAt)) / 1000);
    let timeAgo = "";
    const intervals = { year: 31536000, month: 2592000, day: 86400, hour: 3600, minute: 60 };
    let counter;
    if ((counter = Math.floor(seconds / intervals.year)) > 0) timeAgo = counter === 1 ? '1y ago' : `${counter}y ago`;
    else if ((counter = Math.floor(seconds / intervals.month)) > 0) timeAgo = counter === 1 ? '1mo ago' : `${counter}mo ago`;
    else if ((counter = Math.floor(seconds / intervals.day)) > 0) timeAgo = counter === 1 ? '1d ago' : `${counter}d ago`;
    else if ((counter = Math.floor(seconds / intervals.hour)) > 0) timeAgo = counter === 1 ? '1h ago' : `${counter}h ago`;
    else if ((counter = Math.floor(seconds / intervals.minute)) > 0) timeAgo = counter === 1 ? '1m ago' : `${counter}m ago`;
    else timeAgo = "Just now";
%>

<a href="/blog/<%= blog.urlSlug %>" class="group flex flex-col bg-white rounded-[2rem] shadow-[0_8px_30px_rgb(0,0,0,0.04)] hover:shadow-[0_20px_40px_rgb(0,0,0,0.08)] transition-all duration-500 hover:-translate-y-2 h-full overflow-hidden border border-gray-100/50">
    
    <div class="relative h-56 overflow-hidden">
        <img 
            src="<%= optimizeImage(blog.coverImageURL, 'card') %>" 
            onerror="this.onerror=null;this.src='/images/default-cover.png';"
            alt="<%= blog.title %>" 
            loading="lazy"
            class="w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-700 ease-out"
        >
        <div class="absolute inset-0 bg-black/5 opacity-0 group-hover:opacity-10 transition-opacity duration-500"></div>
    </div>

    <div class="flex-grow p-6 flex flex-col justify-between gap-0">
        
        <div class="flex justify-between items-start gap-4">
            <h2 class="text-lg font-extrabold text-gray-900 leading-snug group-hover:text-brand-600 transition-colors line-clamp-2">
                <%= blog.title %>
            </h2>
            
            <div class="flex-shrink-0 flex items-center gap-1.5 bg-gray-50 px-2.5 py-1.5 rounded-lg group-hover:bg-brand-50 group-hover:text-brand-600 transition-colors">
                <svg class="w-3.5 h-3.5 text-gray-400 group-hover:text-brand-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
                <span class="text-xs font-bold text-gray-500 group-hover:text-brand-600"><%= blog.views %></span>
            </div>
        </div>

        <div class="flex items-center justify-between border-t border-gray-50 pt-2">
            
            <div class="flex items-center gap-2">
                <% if (blog.createdBy) { %>
                    <img src="<%= blog.createdBy.profileImageURL %>" class="w-6 h-6 rounded-full object-cover opacity-90 grayscale group-hover:grayscale-0 transition-all border border-gray-100">
                    <span class="text-xs font-bold text-gray-500 group-hover:text-gray-800 transition-colors"><%= blog.createdBy.fullName %></span>
                <% } else { %>
                    <div class="w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center">
                        <svg class="w-3 h-3 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path></svg>
                    </div>
                    <span class="text-xs font-bold text-gray-400">Guest</span>
                <% } %>
            </div>

            <div class="flex items-center gap-1.5 text-gray-300 group-hover:text-brand-400 transition-colors">
                <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                <span class="text-[11px] font-bold uppercase tracking-wide"><%= timeAgo %></span>
            </div>

        </div>
    </div>
</a>